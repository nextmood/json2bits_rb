network_id INTEGER(8) // either 4, 8, 12 or 16 bits depending on the configuration 
mac_address HEXA(6)
alarm SYMBOL(8;too_many_reboot;too_many_resync;battery_low;battery_critical;too_many_accelerometer_wake_up;accelerometer_has_detected_motion;accelerometer_has_detected_freefall)
child_network_id ALIAS(network_id)
device_add_child SEQUENCE(network_id;child_network_id)
device_death ALIAS(network_id)
device_alarm SEQUENCE(network_id;alarm)
server_fragment XOR(8;0x01:device_add_child;0x02:device_death;0x03:device_alarm) // 8 is the number of bit to encode the list key
server_message LIST_XOR(server_fragment) 


network_id INTEGER(16)
add_child ALIAS(network_id)
lost_child ALIAS(network_id)
alarm SYMBOL(8;too_many_reboot;too_many_resync;battery_low;battery_critical;too_many_accelerometer_wake_up;accelerometer_has_detected_motion;accelerometer_has_detected_freefall)
server_fragment XOR(8;0x01:add_child;0x02:lost_child;0x03:alarm) // 8 is the number of bit to encode the list key
server_signal SEQUENCE(network_id;server_fragment)


device_index INTEGER(4) // either 4, 8, 12 or 16 bits depending on the configuration 
mac_address HEXA(6)
alarm SYMBOL(4;too_many_reboot;too_many_resync;battery_low;battery_critical;too_many_accelerometer_wake_up;accelerometer_has_detected_motion;accelerometer_has_detected_freefall)
temperature FLOAT(4;0.0;200.0)
battery_level FLOAT(4;0.0;100.0) 
child_index ALIAS(device_index)
child_mac ALIAS(mac_address)
device_add_child SEQUENCE(device_index;child_index;child_mac)
device_death ALIAS(device_index)
device_temperature SEQUENCE(device_index;temperature)
device_alarm SEQUENCE(device_index;alarm)
device_battery_level SEQUENCE(device_index;battery_level)
server_fragment XOR(4;0x01:device_add_child;0x02:device_death;0x03:device_alarm;0x04:device_temperature;0x05:device_battery_level) // 4 is the number of bit to encode the list key
server_message LIST_XOR(server_fragment) 

nid INTEGER(16)
timestamp BYTES(6)
too_many_reboot_alarm VOID
too_many_resync_alarm VOID
battery_indicator_alarm SYMBOL(8;low;critical)
too_many_accelerometer_wake_up_alarm VOID 
accelerometer_alarm SYMBOL(8;motion;freefall)
add_child_nid ALIAS(nid)
lost_child_nid ALIAS(nid)
new_parent_nid ALIAS(nid)
signal_xor XOR(8;
    0x01:add_child_nid;
    0x02:lost_child_nid;
    0x03:new_parent_nid;
    0x30:too_many_reboot_alarm;
    0x31:too_many_resync_alarm;
    0x32:battery_indicator_alarm;
    0x33:too_many_accelerometer_wake_up_alarm;
    0x34:accelerometer_alarm
)
signals LIST_XOR(nid;timestamp;signal_xor)

